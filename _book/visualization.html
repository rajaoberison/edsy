<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 5 Visualization | EDS Vignettes</title>
  <meta name="description" content="Data science resources for FES Students" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 5 Visualization | EDS Vignettes" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Data science resources for FES Students" />
  <meta name="github-repo" content="rajaoberison/edsy" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 5 Visualization | EDS Vignettes" />
  
  <meta name="twitter:description" content="Data science resources for FES Students" />
  

<meta name="author" content="Andry Rajaoberison" />


<meta name="date" content="2020-06-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="cleaning.html"/>
<link rel="next" href="spatial.html"/>
<script src="libs/header-attrs-2.2/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">FES EDS Tutorials</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="1" data-path="reading.html"><a href="reading.html"><i class="fa fa-check"></i><b>1</b> Reading</a>
<ul>
<li class="chapter" data-level="1.1" data-path="reading.html"><a href="reading.html#csv"><i class="fa fa-check"></i><b>1.1</b> CSV</a></li>
<li class="chapter" data-level="1.2" data-path="reading.html"><a href="reading.html#excel"><i class="fa fa-check"></i><b>1.2</b> Excel</a></li>
<li class="chapter" data-level="1.3" data-path="reading.html"><a href="reading.html#google-spreadsheets"><i class="fa fa-check"></i><b>1.3</b> Google Spreadsheets</a></li>
<li class="chapter" data-level="1.4" data-path="reading.html"><a href="reading.html#spss"><i class="fa fa-check"></i><b>1.4</b> SPSS</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="extraction.html"><a href="extraction.html"><i class="fa fa-check"></i><b>2</b> Extraction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="extraction.html"><a href="extraction.html#web-scraping"><i class="fa fa-check"></i><b>2.1</b> Web Scraping</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="structuring.html"><a href="structuring.html"><i class="fa fa-check"></i><b>3</b> Structuring</a>
<ul>
<li class="chapter" data-level="3.1" data-path="structuring.html"><a href="structuring.html#inspecting-the-data"><i class="fa fa-check"></i><b>3.1</b> Inspecting the data</a></li>
<li class="chapter" data-level="3.2" data-path="structuring.html"><a href="structuring.html#data-types"><i class="fa fa-check"></i><b>3.2</b> Data types</a></li>
<li class="chapter" data-level="3.3" data-path="structuring.html"><a href="structuring.html#subsetting-and-filtering"><i class="fa fa-check"></i><b>3.3</b> Subsetting and Filtering</a></li>
<li class="chapter" data-level="3.4" data-path="structuring.html"><a href="structuring.html#changing-cell-values"><i class="fa fa-check"></i><b>3.4</b> Changing cell values</a></li>
<li class="chapter" data-level="3.5" data-path="structuring.html"><a href="structuring.html#pivoting-the-dataset"><i class="fa fa-check"></i><b>3.5</b> Pivoting the dataset</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="cleaning.html"><a href="cleaning.html"><i class="fa fa-check"></i><b>4</b> Cleaning</a>
<ul>
<li class="chapter" data-level="4.1" data-path="cleaning.html"><a href="cleaning.html#fixing-skewed-distribution"><i class="fa fa-check"></i><b>4.1</b> Fixing skewed distribution</a></li>
<li class="chapter" data-level="4.2" data-path="cleaning.html"><a href="cleaning.html#treating-outliers"><i class="fa fa-check"></i><b>4.2</b> Treating outliers</a></li>
<li class="chapter" data-level="4.3" data-path="cleaning.html"><a href="cleaning.html#fixing-missing-values"><i class="fa fa-check"></i><b>4.3</b> Fixing missing values</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>5</b> Visualization</a>
<ul>
<li class="chapter" data-level="5.1" data-path="visualization.html"><a href="visualization.html#simple-graphs-with-ggplot2"><i class="fa fa-check"></i><b>5.1</b> Simple graphs with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="visualization.html"><a href="visualization.html#setting-ggplot2-theme"><i class="fa fa-check"></i><b>5.1.1</b> Setting <code>ggplot2</code> theme</a></li>
<li class="chapter" data-level="5.1.2" data-path="visualization.html"><a href="visualization.html#ggplot2-example-1-stacked-bar-plot"><i class="fa fa-check"></i><b>5.1.2</b> <code>ggplot2</code> Example 1: Stacked bar plot</a></li>
<li class="chapter" data-level="5.1.3" data-path="visualization.html"><a href="visualization.html#ggplot2-example-2-grouped-bar-plot"><i class="fa fa-check"></i><b>5.1.3</b> <code>ggplot2</code> Example 2: Grouped bar plot</a></li>
<li class="chapter" data-level="5.1.4" data-path="visualization.html"><a href="visualization.html#ggplot2-example-3-scatterplot"><i class="fa fa-check"></i><b>5.1.4</b> <code>ggplot2</code> Example 3: Scatterplot</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="visualization.html"><a href="visualization.html#animated-graph-with-gganimate"><i class="fa fa-check"></i><b>5.2</b> Animated graph with <code>gganimate</code></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="visualization.html"><a href="visualization.html#plotly-example-1-interactive-version-of-the-stacked-bar"><i class="fa fa-check"></i><b>5.2.1</b> <code>plotly</code> Example 1: Interactive version of the stacked bar</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="visualization.html"><a href="visualization.html#web-app-with-rshiny"><i class="fa fa-check"></i><b>5.3</b> Web app with RShiny</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="visualization.html"><a href="visualization.html#input-functions"><i class="fa fa-check"></i><b>5.3.1</b> Input functions</a></li>
<li class="chapter" data-level="5.3.2" data-path="visualization.html"><a href="visualization.html#output-functions"><i class="fa fa-check"></i><b>5.3.2</b> Output functions</a></li>
<li class="chapter" data-level="5.3.3" data-path="visualization.html"><a href="visualization.html#server-function"><i class="fa fa-check"></i><b>5.3.3</b> Server function</a></li>
<li class="chapter" data-level="5.3.4" data-path="visualization.html"><a href="visualization.html#sharing-your-app"><i class="fa fa-check"></i><b>5.3.4</b> Sharing your app</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="visualization.html"><a href="visualization.html#more-dataviz-resources"><i class="fa fa-check"></i><b>5.4</b> More dataviz resources</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="spatial.html"><a href="spatial.html"><i class="fa fa-check"></i><b>6</b> Spatial data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="spatial.html"><a href="spatial.html#importing-spatial-data"><i class="fa fa-check"></i><b>6.1</b> Importing spatial data</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="spatial.html"><a href="spatial.html#reading-shapefile"><i class="fa fa-check"></i><b>6.1.1</b> Reading shapefile</a></li>
<li class="chapter" data-level="6.1.2" data-path="spatial.html"><a href="spatial.html#reading-raster"><i class="fa fa-check"></i><b>6.1.2</b> Reading raster</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="spatial.html"><a href="spatial.html#processing"><i class="fa fa-check"></i><b>6.2</b> Processing</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="spatial.html"><a href="spatial.html#creating-point-data"><i class="fa fa-check"></i><b>6.2.1</b> Creating point data</a></li>
<li class="chapter" data-level="6.2.2" data-path="spatial.html"><a href="spatial.html#joining-with-another-dataframe"><i class="fa fa-check"></i><b>6.2.2</b> Joining with another dataframe</a></li>
<li class="chapter" data-level="6.2.3" data-path="spatial.html"><a href="spatial.html#spatial-joining"><i class="fa fa-check"></i><b>6.2.3</b> Spatial joining</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="spatial.html"><a href="spatial.html#some-visualization-examples"><i class="fa fa-check"></i><b>6.3</b> Some Visualization Examples</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="spatial.html"><a href="spatial.html#plotting-charcoal-data"><i class="fa fa-check"></i><b>6.3.1</b> Plotting charcoal data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="analysis.html"><a href="analysis.html"><i class="fa fa-check"></i><b>7</b> Analysis</a>
<ul>
<li class="chapter" data-level="7.1" data-path="analysis.html"><a href="analysis.html#working-with-survey-data"><i class="fa fa-check"></i><b>7.1</b> Working with survey data</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="analysis.html"><a href="analysis.html#variable-standardization"><i class="fa fa-check"></i><b>7.1.1</b> Variable Standardization</a></li>
<li class="chapter" data-level="7.1.2" data-path="analysis.html"><a href="analysis.html#sample-weighting"><i class="fa fa-check"></i><b>7.1.2</b> Sample weighting</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="analysis.html"><a href="analysis.html#working-with-covid-19-data"><i class="fa fa-check"></i><b>7.2</b> Working with COVID-19 data</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>8</b> Resources</a>
<ul>
<li class="chapter" data-level="8.1" data-path="resources.html"><a href="resources.html#data"><i class="fa fa-check"></i><b>8.1</b> Data</a></li>
<li class="chapter" data-level="8.2" data-path="resources.html"><a href="resources.html#eds-course-map"><i class="fa fa-check"></i><b>8.2</b> EDS Course Map</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">EDS Vignettes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="visualization" class="section level1" number="5">
<h1><span class="header-section-number">Section 5</span> Visualization</h1>
<div id="simple-graphs-with-ggplot2" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Simple graphs with <code>ggplot2</code></h2>
<p>Reading and recoding data</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="visualization.html#cb99-1"></a><span class="kw">library</span>(haven)</span>
<span id="cb99-2"><a href="visualization.html#cb99-2"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb99-3"><a href="visualization.html#cb99-3"></a><span class="kw">library</span>(tidyr)</span>
<span id="cb99-4"><a href="visualization.html#cb99-4"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb99-5"><a href="visualization.html#cb99-5"></a></span>
<span id="cb99-6"><a href="visualization.html#cb99-6"></a>raw.data &lt;-<span class="st"> </span><span class="kw">read_sav</span>(<span class="st">&#39;data/ypccc-hurricane.sav&#39;</span>)</span>
<span id="cb99-7"><a href="visualization.html#cb99-7"></a>raw.data &lt;-<span class="st"> </span>raw.data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(raw.data<span class="op">$</span>Q1<span class="op">==</span><span class="dv">1</span> <span class="op">||</span><span class="st"> </span>raw.data<span class="op">$</span>Q2<span class="op">==</span><span class="dv">1</span>)</span>
<span id="cb99-8"><a href="visualization.html#cb99-8"></a>raw.data &lt;-<span class="st"> </span>raw.data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(raw.data<span class="op">$</span>Q3), raw.data<span class="op">$</span>Q3<span class="op">!=</span><span class="dv">2</span>, raw.data<span class="op">$</span>Q3<span class="op">!=</span><span class="dv">3</span>)</span>
<span id="cb99-9"><a href="visualization.html#cb99-9"></a></span>
<span id="cb99-10"><a href="visualization.html#cb99-10"></a>raw.data<span class="op">$</span>S5_cluster &lt;-<span class="st"> </span><span class="kw">recode</span>(<span class="kw">as.character</span>(raw.data<span class="op">$</span>S5_cluster), <span class="st">&#39;1&#39;</span>=<span class="st">&#39;DieHards&#39;</span>, <span class="st">&#39;2&#39;</span>=<span class="st">&#39;Reluctant&#39;</span>, <span class="st">&#39;4&#39;</span>=<span class="st">&#39;Optimists&#39;</span>, <span class="st">&#39;3&#39;</span>=<span class="st">&#39;Constrained&#39;</span>, <span class="st">&#39;5&#39;</span>=<span class="st">&#39;First Out&#39;</span>)</span>
<span id="cb99-11"><a href="visualization.html#cb99-11"></a>raw.data<span class="op">$</span>S5_cluster &lt;-<span class="st"> </span><span class="kw">factor</span>(raw.data<span class="op">$</span>S5_cluster, <span class="dt">ordered=</span>T, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&#39;First Out&#39;</span>, <span class="st">&#39;Constrained&#39;</span>, <span class="st">&#39;Optimists&#39;</span>, <span class="st">&#39;Reluctant&#39;</span>, <span class="st">&#39;DieHards&#39;</span>))</span>
<span id="cb99-12"><a href="visualization.html#cb99-12"></a>data &lt;-<span class="st"> </span>raw.data[<span class="op">!</span><span class="kw">is.na</span>(raw.data<span class="op">$</span>S5_cluster),]</span></code></pre></div>
<div id="setting-ggplot2-theme" class="section level3" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Setting <code>ggplot2</code> theme</h3>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="visualization.html#cb100-1"></a>plot_theme &lt;-<span class="st"> </span></span>
<span id="cb100-2"><a href="visualization.html#cb100-2"></a><span class="st">  </span><span class="kw">theme</span>(</span>
<span id="cb100-3"><a href="visualization.html#cb100-3"></a>    <span class="dt">legend.title =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb100-4"><a href="visualization.html#cb100-4"></a>    <span class="dt">legend.box.background =</span> <span class="kw">element_rect</span>(),</span>
<span id="cb100-5"><a href="visualization.html#cb100-5"></a>    <span class="dt">legend.box.margin =</span> <span class="kw">margin</span>(<span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">6</span>),</span>
<span id="cb100-6"><a href="visualization.html#cb100-6"></a>    <span class="dt">legend.background =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb100-7"><a href="visualization.html#cb100-7"></a>    <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">12</span>),</span>
<span id="cb100-8"><a href="visualization.html#cb100-8"></a>    <span class="dt">legend.key.size =</span> <span class="kw">unit</span>(<span class="dv">1</span>, <span class="st">&quot;cm&quot;</span>)</span>
<span id="cb100-9"><a href="visualization.html#cb100-9"></a>  ) <span class="op">+</span><span class="st"> </span></span>
<span id="cb100-10"><a href="visualization.html#cb100-10"></a><span class="st">  </span><span class="kw">theme</span>(</span>
<span id="cb100-11"><a href="visualization.html#cb100-11"></a>    <span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">12</span>, <span class="dt">face=</span><span class="st">&#39;bold&#39;</span>),</span>
<span id="cb100-12"><a href="visualization.html#cb100-12"></a>    <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">colour =</span> <span class="st">&quot;#212F3D&quot;</span>),</span>
<span id="cb100-13"><a href="visualization.html#cb100-13"></a>    <span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb100-14"><a href="visualization.html#cb100-14"></a>    <span class="dt">axis.title.y =</span> <span class="kw">element_blank</span>()</span>
<span id="cb100-15"><a href="visualization.html#cb100-15"></a>  ) <span class="op">+</span><span class="st"> </span></span>
<span id="cb100-16"><a href="visualization.html#cb100-16"></a><span class="st">  </span><span class="kw">theme</span>(</span>
<span id="cb100-17"><a href="visualization.html#cb100-17"></a>    <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">20</span>, <span class="dt">face=</span><span class="st">&#39;bold&#39;</span>, <span class="dt">hjust =</span> <span class="fl">0.5</span>, <span class="dt">margin=</span><span class="kw">margin</span>(<span class="dv">6</span>,<span class="dv">6</span>,<span class="dv">6</span>,<span class="dv">6</span>)),</span>
<span id="cb100-18"><a href="visualization.html#cb100-18"></a>    <span class="dt">plot.background=</span><span class="kw">element_blank</span>() </span>
<span id="cb100-19"><a href="visualization.html#cb100-19"></a>  ) <span class="op">+</span></span>
<span id="cb100-20"><a href="visualization.html#cb100-20"></a><span class="st">  </span><span class="kw">theme</span>(</span>
<span id="cb100-21"><a href="visualization.html#cb100-21"></a>    <span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb100-22"><a href="visualization.html#cb100-22"></a>    <span class="dt">panel.grid.minor.x =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb100-23"><a href="visualization.html#cb100-23"></a>    <span class="dt">panel.grid.major.y =</span> <span class="kw">element_line</span>(<span class="dt">size=</span><span class="dv">1</span>)</span>
<span id="cb100-24"><a href="visualization.html#cb100-24"></a>  )</span></code></pre></div>
</div>
<div id="ggplot2-example-1-stacked-bar-plot" class="section level3" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> <code>ggplot2</code> Example 1: Stacked bar plot</h3>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="visualization.html#cb101-1"></a><span class="co"># Q31. Is your home located in a hurricane evacuation zone, or not?</span></span>
<span id="cb101-2"><a href="visualization.html#cb101-2"></a>data<span class="op">$</span>Q31 &lt;-<span class="st"> </span><span class="kw">as_factor</span>(data<span class="op">$</span>Q31)</span>
<span id="cb101-3"><a href="visualization.html#cb101-3"></a>data<span class="op">$</span>Q31 &lt;-<span class="st"> </span><span class="kw">factor</span>(data<span class="op">$</span>Q31, <span class="dt">ordered=</span>T, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&#39;No&#39;</span>, <span class="st">&#39;Not Sure&#39;</span>, <span class="st">&#39;Yes&#39;</span>))</span>
<span id="cb101-4"><a href="visualization.html#cb101-4"></a></span>
<span id="cb101-5"><a href="visualization.html#cb101-5"></a>Q31_data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb101-6"><a href="visualization.html#cb101-6"></a><span class="st">  </span><span class="kw">select</span>(Q31, S5_cluster, Final_wgt_pop) <span class="op">%&gt;%</span></span>
<span id="cb101-7"><a href="visualization.html#cb101-7"></a><span class="st">  </span><span class="co"># na.omit() %&gt;%</span></span>
<span id="cb101-8"><a href="visualization.html#cb101-8"></a><span class="st">  </span><span class="kw">group_by</span>(S5_cluster, Q31) <span class="op">%&gt;%</span></span>
<span id="cb101-9"><a href="visualization.html#cb101-9"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Q31.wgt =</span> <span class="kw">sum</span>(Final_wgt_pop)) <span class="op">%&gt;%</span></span>
<span id="cb101-10"><a href="visualization.html#cb101-10"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">freq.wgt =</span> <span class="kw">round</span>(<span class="dv">100</span><span class="op">*</span>Q31.wgt<span class="op">/</span><span class="kw">sum</span>(Q31.wgt))) <span class="op">%&gt;%</span></span>
<span id="cb101-11"><a href="visualization.html#cb101-11"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(Q31))</span>
<span id="cb101-12"><a href="visualization.html#cb101-12"></a></span>
<span id="cb101-13"><a href="visualization.html#cb101-13"></a><span class="kw">ggplot</span>(Q31_data, <span class="kw">aes</span>(<span class="dt">x=</span>S5_cluster, <span class="dt">y=</span>freq.wgt, <span class="dt">fill=</span>Q31)) <span class="op">+</span></span>
<span id="cb101-14"><a href="visualization.html#cb101-14"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">fill=</span>Q31), <span class="dt">width=</span>.<span class="dv">7</span>, <span class="dt">stat=</span><span class="st">&#39;identity&#39;</span>) <span class="op">+</span></span>
<span id="cb101-15"><a href="visualization.html#cb101-15"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label=</span>freq.wgt, <span class="dt">vjust=</span>.<span class="dv">5</span>), <span class="dt">position =</span> <span class="kw">position_stack</span>(<span class="dt">vjust =</span> <span class="fl">0.5</span>), <span class="dt">colour=</span><span class="st">&#39;white&#39;</span>, <span class="dt">size=</span><span class="dv">6</span>, <span class="dt">fontface=</span><span class="st">&#39;bold&#39;</span>) <span class="op">+</span></span>
<span id="cb101-16"><a href="visualization.html#cb101-16"></a><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values=</span><span class="kw">c</span>(<span class="st">&#39;#DC7633&#39;</span>, <span class="st">&#39;#5D6D7E&#39;</span>, <span class="st">&#39;#5499C7&#39;</span>), <span class="dt">breaks=</span><span class="kw">c</span>(<span class="st">&#39;Yes&#39;</span>, <span class="st">&#39;Not Sure&#39;</span>, <span class="st">&#39;No&#39;</span>)) <span class="op">+</span></span>
<span id="cb101-17"><a href="visualization.html#cb101-17"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> <span class="cf">function</span>(x) <span class="kw">paste0</span>(x, <span class="st">&quot;%&quot;</span>), <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">100</span>)) <span class="op">+</span></span>
<span id="cb101-18"><a href="visualization.html#cb101-18"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;% of CT coastal residents who understand</span><span class="ch">\n</span><span class="st">that their home is in an evacuation zone&quot;</span>) <span class="op">+</span></span>
<span id="cb101-19"><a href="visualization.html#cb101-19"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;top&quot;</span>) <span class="op">+</span></span>
<span id="cb101-20"><a href="visualization.html#cb101-20"></a><span class="st">  </span>plot_theme <span class="op">+</span><span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.box.background =</span> <span class="kw">element_blank</span>(), <span class="dt">legend.spacing.x =</span> <span class="kw">unit</span>(.<span class="dv">2</span>, <span class="st">&#39;cm&#39;</span>))</span></code></pre></div>
<p><img src="edsy_files/figure-html/example-1-1.png" width="672" /></p>
</div>
<div id="ggplot2-example-2-grouped-bar-plot" class="section level3" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> <code>ggplot2</code> Example 2: Grouped bar plot</h3>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="visualization.html#cb102-1"></a><span class="co"># Q23. On a scale of 0%-100%, with 0% being it definitely will NOT happen and 100% being it definitely WILL happen, </span></span>
<span id="cb102-2"><a href="visualization.html#cb102-2"></a><span class="co"># how likely do you think it is that each of the following types of hurricane will hit somewhere along the </span></span>
<span id="cb102-3"><a href="visualization.html#cb102-3"></a><span class="co"># Connecticut coast in the next 50 years?</span></span>
<span id="cb102-4"><a href="visualization.html#cb102-4"></a></span>
<span id="cb102-5"><a href="visualization.html#cb102-5"></a>Q23_data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span></span>
<span id="cb102-6"><a href="visualization.html#cb102-6"></a><span class="st">  </span><span class="kw">select</span>(S5_cluster, Q23_<span class="dv">1</span>, Q23_<span class="dv">2</span>, Q23_<span class="dv">3</span>, Q23_<span class="dv">4</span>, Final_wgt_pop) <span class="op">%&gt;%</span></span>
<span id="cb102-7"><a href="visualization.html#cb102-7"></a><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="op">-</span><span class="kw">one_of</span>(<span class="st">&#39;S5_cluster&#39;</span>, <span class="st">&#39;Final_wgt_pop&#39;</span>), <span class="dt">names_to=</span><span class="st">&quot;Category&quot;</span>, <span class="dt">names_prefix =</span> <span class="st">&quot;Q23_&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Q23&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb102-8"><a href="visualization.html#cb102-8"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Category =</span> <span class="kw">paste</span>(<span class="st">&quot;Category&quot;</span>, Category), <span class="dt">Q23.wgt =</span> Q23 <span class="op">*</span><span class="st"> </span>Final_wgt_pop) <span class="op">%&gt;%</span></span>
<span id="cb102-9"><a href="visualization.html#cb102-9"></a><span class="st">  </span><span class="kw">na.omit</span>() <span class="op">%&gt;%</span></span>
<span id="cb102-10"><a href="visualization.html#cb102-10"></a><span class="st">  </span><span class="kw">group_by</span>(S5_cluster, Category) <span class="op">%&gt;%</span></span>
<span id="cb102-11"><a href="visualization.html#cb102-11"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">freq.wgt =</span> <span class="kw">round</span>(<span class="kw">sum</span>(Q23.wgt, <span class="dt">na.rm=</span>T)<span class="op">/</span><span class="kw">sum</span>(Final_wgt_pop, <span class="dt">na.rm=</span>T)))</span>
<span id="cb102-12"><a href="visualization.html#cb102-12"></a></span>
<span id="cb102-13"><a href="visualization.html#cb102-13"></a><span class="kw">ggplot</span>(Q23_data, <span class="kw">aes</span>(<span class="dt">x=</span>S5_cluster, <span class="dt">y=</span>freq.wgt, <span class="dt">fill=</span>Category)) <span class="op">+</span></span>
<span id="cb102-14"><a href="visualization.html#cb102-14"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">fill=</span>Category), <span class="dt">width=</span>.<span class="dv">7</span>, <span class="dt">position=</span><span class="kw">position_dodge</span>(.<span class="dv">8</span>), <span class="dt">stat=</span><span class="st">&#39;identity&#39;</span>) <span class="op">+</span></span>
<span id="cb102-15"><a href="visualization.html#cb102-15"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label=</span>freq.wgt, <span class="dt">vjust=</span><span class="fl">1.2</span>), <span class="dt">position=</span><span class="kw">position_dodge</span>(.<span class="dv">8</span>), <span class="dt">colour=</span><span class="st">&#39;white&#39;</span>, <span class="dt">size=</span><span class="dv">6</span>, <span class="dt">fontface=</span><span class="st">&#39;bold&#39;</span>) <span class="op">+</span></span>
<span id="cb102-16"><a href="visualization.html#cb102-16"></a><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values=</span><span class="kw">c</span>(<span class="st">&#39;#F6DDCC&#39;</span>, <span class="st">&#39;#EDBB99&#39;</span>, <span class="st">&#39;#E59866&#39;</span>, <span class="st">&#39;#DC7633&#39;</span>)) <span class="op">+</span></span>
<span id="cb102-17"><a href="visualization.html#cb102-17"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> <span class="cf">function</span>(x) <span class="kw">paste0</span>(x, <span class="st">&quot;%&quot;</span>), <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">100</span>)) <span class="op">+</span></span>
<span id="cb102-18"><a href="visualization.html#cb102-18"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Average perception of each segment that</span><span class="ch">\n</span><span class="st">a Category 1, 2, 3, or 4 hurricane will occur</span><span class="ch">\n</span><span class="st">in the next 50 years&quot;</span>) <span class="op">+</span></span>
<span id="cb102-19"><a href="visualization.html#cb102-19"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;top&quot;</span>) <span class="op">+</span></span>
<span id="cb102-20"><a href="visualization.html#cb102-20"></a><span class="st">  </span>plot_theme <span class="op">+</span><span class="st"> </span></span>
<span id="cb102-21"><a href="visualization.html#cb102-21"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.box.background =</span> <span class="kw">element_blank</span>(), <span class="dt">legend.spacing.x =</span> <span class="kw">unit</span>(.<span class="dv">2</span>, <span class="st">&#39;cm&#39;</span>))</span></code></pre></div>
<p><img src="edsy_files/figure-html/example-2-1.png" width="672" /></p>
</div>
<div id="ggplot2-example-3-scatterplot" class="section level3" number="5.1.4">
<h3><span class="header-section-number">5.1.4</span> <code>ggplot2</code> Example 3: Scatterplot</h3>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="visualization.html#cb103-1"></a><span class="co"># Scatterplot of state-level average annual temperature by avg ann precipitation (values and anomalies)</span></span>
<span id="cb103-2"><a href="visualization.html#cb103-2"></a><span class="co"># CAweather &lt;- read.csv(&#39;CA_Weather.csv&#39;) # missing dataset so go to original source and download manually</span></span>
<span id="cb103-3"><a href="visualization.html#cb103-3"></a><span class="co"># Data source: https://www.ncdc.noaa.gov/cag/statewide/time-series</span></span>
<span id="cb103-4"><a href="visualization.html#cb103-4"></a><span class="co"># Need to set base period from 1978 to 1998 in Options dialog and set parameters before downloading (12-Month)</span></span>
<span id="cb103-5"><a href="visualization.html#cb103-5"></a></span>
<span id="cb103-6"><a href="visualization.html#cb103-6"></a>ca.pcp &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/4-pcp-12-12-1978-2020.csv&#39;</span>, <span class="dt">skip=</span><span class="dv">4</span>)</span>
<span id="cb103-7"><a href="visualization.html#cb103-7"></a>ca.tavg &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/4-tavg-12-12-1978-2020.csv&#39;</span>, <span class="dt">skip=</span><span class="dv">4</span>)</span>
<span id="cb103-8"><a href="visualization.html#cb103-8"></a><span class="kw">names</span>(ca.pcp) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Year&#39;</span>, <span class="st">&#39;Precip&#39;</span>, <span class="st">&#39;Precip.Anomaly&#39;</span>)</span>
<span id="cb103-9"><a href="visualization.html#cb103-9"></a><span class="kw">names</span>(ca.tavg) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Year&#39;</span>, <span class="st">&#39;Temp&#39;</span>, <span class="st">&#39;Temp.Anomaly&#39;</span>)</span>
<span id="cb103-10"><a href="visualization.html#cb103-10"></a></span>
<span id="cb103-11"><a href="visualization.html#cb103-11"></a>ca.weather &lt;-<span class="st"> </span><span class="kw">left_join</span>(ca.tavg, ca.pcp, <span class="dt">by=</span><span class="st">&#39;Year&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb103-12"><a href="visualization.html#cb103-12"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Year=</span><span class="kw">as.integer</span>(<span class="kw">substr</span>(Year, <span class="dv">1</span>, <span class="dv">4</span>)), </span>
<span id="cb103-13"><a href="visualization.html#cb103-13"></a>         <span class="dt">Period=</span><span class="kw">if_else</span>(Year<span class="op">&lt;</span><span class="dv">1990</span>, <span class="st">&#39;Before 1990&#39;</span>,</span>
<span id="cb103-14"><a href="visualization.html#cb103-14"></a>                         <span class="kw">if_else</span>(Year<span class="op">&lt;</span><span class="dv">2000</span>, <span class="st">&#39;1990-2000&#39;</span>,</span>
<span id="cb103-15"><a href="visualization.html#cb103-15"></a>                                 <span class="kw">if_else</span>(Year<span class="op">&lt;</span><span class="dv">2010</span>, <span class="st">&#39;2000-2010&#39;</span>, <span class="st">&#39;Since 2010&#39;</span>)))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb103-16"><a href="visualization.html#cb103-16"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Period=</span><span class="kw">factor</span>(Period, <span class="kw">c</span>(<span class="st">&#39;Before 1990&#39;</span>, <span class="st">&#39;1990-2000&#39;</span>, <span class="st">&#39;2000-2010&#39;</span>, <span class="st">&#39;Since 2010&#39;</span>)))</span>
<span id="cb103-17"><a href="visualization.html#cb103-17"></a></span>
<span id="cb103-18"><a href="visualization.html#cb103-18"></a>s &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> ca.weather, <span class="kw">aes</span>(<span class="dt">x=</span>Temp.Anomaly, <span class="dt">y=</span>Precip.Anomaly))</span>
<span id="cb103-19"><a href="visualization.html#cb103-19"></a></span>
<span id="cb103-20"><a href="visualization.html#cb103-20"></a>hottest.v &lt;-<span class="st"> </span><span class="kw">max</span>(ca.weather<span class="op">$</span>Temp.Anomaly)</span>
<span id="cb103-21"><a href="visualization.html#cb103-21"></a>hottest.y &lt;-<span class="st"> </span><span class="kw">filter</span>(ca.weather, Temp.Anomaly<span class="op">==</span>hottest.v)<span class="op">$</span>Year</span>
<span id="cb103-22"><a href="visualization.html#cb103-22"></a>driest.v &lt;-<span class="st"> </span><span class="kw">min</span>(ca.weather<span class="op">$</span>Precip.Anomaly)</span>
<span id="cb103-23"><a href="visualization.html#cb103-23"></a>driest.y &lt;-<span class="st"> </span><span class="kw">filter</span>(ca.weather, Precip.Anomaly<span class="op">==</span>driest.v)<span class="op">$</span>Year</span>
<span id="cb103-24"><a href="visualization.html#cb103-24"></a></span>
<span id="cb103-25"><a href="visualization.html#cb103-25"></a>s <span class="op">+</span><span class="st"> </span></span>
<span id="cb103-26"><a href="visualization.html#cb103-26"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color=</span>Period), <span class="dt">size=</span><span class="dv">2</span>) <span class="op">+</span></span>
<span id="cb103-27"><a href="visualization.html#cb103-27"></a><span class="st">  </span><span class="kw">geom_smooth</span>() <span class="op">+</span></span>
<span id="cb103-28"><a href="visualization.html#cb103-28"></a><span class="st">  </span><span class="kw">geom_label</span>(<span class="dt">label=</span><span class="kw">if_else</span>(ca.weather<span class="op">$</span>Temp.Anomaly<span class="op">==</span>hottest.v, <span class="kw">paste</span>(<span class="st">&#39;Hottest Year</span><span class="ch">\n</span><span class="st">&#39;</span>, hottest.y), <span class="ot">NULL</span>), <span class="dt">nudge_x =</span> <span class="fl">-.2</span>, <span class="dt">nudge_y =</span> <span class="dv">3</span>) <span class="op">+</span></span>
<span id="cb103-29"><a href="visualization.html#cb103-29"></a><span class="st">  </span><span class="kw">geom_label</span>(<span class="dt">label=</span><span class="kw">if_else</span>(ca.weather<span class="op">$</span>Precip.Anomaly<span class="op">==</span>driest.v, <span class="kw">paste</span>(<span class="st">&#39;Driest Year</span><span class="ch">\n</span><span class="st">&#39;</span>, driest.y), <span class="ot">NULL</span>), <span class="dt">nudge_x =</span> <span class="fl">-.4</span>, <span class="dt">nudge_y =</span> <span class="dv">0</span>) <span class="op">+</span></span>
<span id="cb103-30"><a href="visualization.html#cb103-30"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&#39;Hotter and Drier Wildfire Seasons in California&#39;</span>, <span class="dt">subtitle=</span><span class="st">&#39;Precipitation vs. temperature anomalies in California from January to October over 40 years (1978-2020)&#39;</span>, <span class="dt">caption=</span><span class="st">&#39;Data from NOAA&#39;</span>, <span class="dt">y=</span><span class="st">&#39;Precipitation anomaly (inches)&#39;</span>, <span class="dt">x=</span><span class="st">&#39;Temperature anomaly (Â°F)&#39;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb103-31"><a href="visualization.html#cb103-31"></a><span class="st">  </span><span class="kw">theme_light</span>() </span></code></pre></div>
<p><img src="edsy_files/figure-html/example-3-1.png" width="672" /></p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="visualization.html#cb104-1"></a><span class="co"># save as png file</span></span>
<span id="cb104-2"><a href="visualization.html#cb104-2"></a><span class="co"># ggsave(file = &#39;CA.weather.png&#39;, height=9, width=12)</span></span>
<span id="cb104-3"><a href="visualization.html#cb104-3"></a></span>
<span id="cb104-4"><a href="visualization.html#cb104-4"></a><span class="co"># a simpler one</span></span>
<span id="cb104-5"><a href="visualization.html#cb104-5"></a><span class="kw">ggplot</span>(ca.weather, <span class="kw">aes</span>(Year, Temp.Anomaly)) <span class="op">+</span></span>
<span id="cb104-6"><a href="visualization.html#cb104-6"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">color=</span><span class="st">&#39;#0D47A1&#39;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color=</span>Temp.Anomaly)) <span class="op">+</span></span>
<span id="cb104-7"><a href="visualization.html#cb104-7"></a><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept=</span><span class="dv">0</span>, <span class="dt">linetype=</span><span class="dv">2</span>, <span class="dt">color=</span><span class="st">&#39;#aaaaaa&#39;</span>) <span class="op">+</span></span>
<span id="cb104-8"><a href="visualization.html#cb104-8"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&#39;California Temperature Anomaly 1978-2020&#39;</span>) <span class="op">+</span></span>
<span id="cb104-9"><a href="visualization.html#cb104-9"></a><span class="st">  </span><span class="kw">scale_color_gradient</span>(<span class="dt">low=</span><span class="st">&#39;blue&#39;</span>, <span class="dt">high=</span><span class="st">&#39;red&#39;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb104-10"><a href="visualization.html#cb104-10"></a><span class="st">  </span><span class="kw">theme_classic</span>()</span></code></pre></div>
<p><img src="edsy_files/figure-html/example-3-2.png" width="672" /></p>
</div>
</div>
<div id="animated-graph-with-gganimate" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Animated graph with <code>gganimate</code></h2>
<p>We can do this by simply adding <code>gganimate</code> code to the previous plot.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="visualization.html#cb105-1"></a><span class="kw">library</span>(gganimate)</span>
<span id="cb105-2"><a href="visualization.html#cb105-2"></a></span>
<span id="cb105-3"><a href="visualization.html#cb105-3"></a>animated.plot &lt;-<span class="st"> </span><span class="kw">ggplot</span>(ca.weather, <span class="kw">aes</span>(Year, Temp.Anomaly)) <span class="op">+</span></span>
<span id="cb105-4"><a href="visualization.html#cb105-4"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">color=</span><span class="st">&#39;#0D47A1&#39;</span>) <span class="op">+</span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">color=</span>Temp.Anomaly)) <span class="op">+</span></span>
<span id="cb105-5"><a href="visualization.html#cb105-5"></a><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept=</span><span class="dv">0</span>, <span class="dt">linetype=</span><span class="dv">2</span>, <span class="dt">color=</span><span class="st">&#39;#aaaaaa&#39;</span>) <span class="op">+</span></span>
<span id="cb105-6"><a href="visualization.html#cb105-6"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&#39;California Temperature Anomaly 1978-2020&#39;</span>) <span class="op">+</span></span>
<span id="cb105-7"><a href="visualization.html#cb105-7"></a><span class="st">  </span><span class="kw">scale_color_gradient</span>(<span class="dt">low=</span><span class="st">&#39;blue&#39;</span>, <span class="dt">high=</span><span class="st">&#39;red&#39;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb105-8"><a href="visualization.html#cb105-8"></a><span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span></span>
<span id="cb105-9"><a href="visualization.html#cb105-9"></a><span class="st">  </span><span class="co"># labels</span></span>
<span id="cb105-10"><a href="visualization.html#cb105-10"></a><span class="st">  </span><span class="kw">geom_label</span>(<span class="kw">aes</span>(<span class="dt">label=</span><span class="kw">as.character</span>(Year)), <span class="dt">nudge_y=</span>.<span class="dv">3</span>) <span class="op">+</span></span>
<span id="cb105-11"><a href="visualization.html#cb105-11"></a><span class="st">  </span><span class="co"># gganimate code</span></span>
<span id="cb105-12"><a href="visualization.html#cb105-12"></a><span class="st">  </span><span class="kw">transition_reveal</span>(<span class="kw">seq_along</span>(Year))</span>
<span id="cb105-13"><a href="visualization.html#cb105-13"></a></span>
<span id="cb105-14"><a href="visualization.html#cb105-14"></a><span class="co"># animate(animated.plot)</span></span></code></pre></div>
<p><img src="images/gganim.gif" alt="gganim" />
## Interactive graph with <code>plotly</code></p>
<p>Creating an interactive version of the previous graphs is pretty simple using <code>plotly</code>. You just have to separate the data by group.</p>
<div id="plotly-example-1-interactive-version-of-the-stacked-bar" class="section level3" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> <code>plotly</code> Example 1: Interactive version of the stacked bar</h3>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="visualization.html#cb106-1"></a><span class="kw">library</span>(plotly)</span>
<span id="cb106-2"><a href="visualization.html#cb106-2"></a></span>
<span id="cb106-3"><a href="visualization.html#cb106-3"></a>Q31.yes &lt;-<span class="st"> </span>Q31_data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb106-4"><a href="visualization.html#cb106-4"></a><span class="st">  </span><span class="kw">filter</span>(Q31<span class="op">==</span><span class="st">&#39;Yes&#39;</span>)</span>
<span id="cb106-5"><a href="visualization.html#cb106-5"></a>Q31.notsure &lt;-<span class="st"> </span>Q31_data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb106-6"><a href="visualization.html#cb106-6"></a><span class="st">  </span><span class="kw">filter</span>(Q31<span class="op">==</span><span class="st">&#39;Not Sure&#39;</span>)</span>
<span id="cb106-7"><a href="visualization.html#cb106-7"></a>Q31.no &lt;-<span class="st"> </span>Q31_data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb106-8"><a href="visualization.html#cb106-8"></a><span class="st">  </span><span class="kw">filter</span>(Q31<span class="op">==</span><span class="st">&#39;No&#39;</span>)</span>
<span id="cb106-9"><a href="visualization.html#cb106-9"></a></span>
<span id="cb106-10"><a href="visualization.html#cb106-10"></a><span class="kw">plot_ly</span>(<span class="dt">x=</span>Q31.yes<span class="op">$</span>S5_cluster, <span class="dt">y=</span>Q31.yes<span class="op">$</span>freq.wgt, <span class="dt">type=</span><span class="st">&#39;bar&#39;</span>, <span class="dt">name=</span><span class="st">&#39;Yes&#39;</span>, <span class="dt">marker =</span> <span class="kw">list</span>(<span class="dt">color =</span> <span class="st">&#39;#DC7633&#39;</span>), <span class="dt">text =</span> Q31.yes<span class="op">$</span>freq.wgt, <span class="dt">textposition =</span> <span class="st">&#39;auto&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb106-11"><a href="visualization.html#cb106-11"></a><span class="st">  </span><span class="kw">add_trace</span>(<span class="dt">x=</span>Q31.notsure<span class="op">$</span>S5_cluster, <span class="dt">y=</span>Q31.notsure<span class="op">$</span>freq.wgt, <span class="dt">name=</span><span class="st">&#39;Not Sure&#39;</span>, <span class="dt">marker =</span> <span class="kw">list</span>(<span class="dt">color =</span> <span class="st">&#39;#5D6D7E&#39;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb106-12"><a href="visualization.html#cb106-12"></a><span class="st">  </span><span class="kw">add_trace</span>(<span class="dt">x=</span>Q31.no<span class="op">$</span>S5_cluster, <span class="dt">y=</span>Q31.no<span class="op">$</span>freq.wgt, <span class="dt">name=</span><span class="st">&#39;No&#39;</span>, <span class="dt">marker =</span> <span class="kw">list</span>(<span class="dt">color =</span> <span class="st">&#39;#5499C7&#39;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb106-13"><a href="visualization.html#cb106-13"></a><span class="st">  </span><span class="kw">layout</span>(<span class="dt">barmode =</span> <span class="st">&#39;stack&#39;</span>)</span></code></pre></div>
<div id="htmlwidget-c93ce4516e0bb16fb479" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-c93ce4516e0bb16fb479">{"x":{"visdat":{"bc16f90eae5":["function () ","plotlyVisDat"]},"cur_data":"bc16f90eae5","attrs":{"bc16f90eae5":{"x":["First Out","Constrained","Optimists","Reluctant","DieHards"],"y":[58,34,20,14,30],"marker":{"color":"#DC7633"},"text":[58,34,20,14,30],"textposition":"auto","name":"Yes","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"bc16f90eae5.1":{"x":["First Out","Constrained","Optimists","Reluctant","DieHards"],"y":[32,51,60,54,41],"marker":{"color":"#5D6D7E"},"text":[58,34,20,14,30],"textposition":"auto","name":"Not Sure","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","inherit":true},"bc16f90eae5.2":{"x":["First Out","Constrained","Optimists","Reluctant","DieHards"],"y":[8,14,18,32,29],"marker":{"color":"#5499C7"},"text":[58,34,20,14,30],"textposition":"auto","name":"No","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"barmode":"stack","xaxis":{"domain":[0,1],"automargin":true,"title":[],"type":"category","categoryorder":"array","categoryarray":["First Out","Constrained","Optimists","Reluctant","DieHards"]},"yaxis":{"domain":[0,1],"automargin":true,"title":[]},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":["First Out","Constrained","Optimists","Reluctant","DieHards"],"y":[58,34,20,14,30],"marker":{"color":"#DC7633","line":{"color":"rgba(31,119,180,1)"}},"text":[58,34,20,14,30],"textposition":["auto","auto","auto","auto","auto"],"name":"Yes","type":"bar","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["First Out","Constrained","Optimists","Reluctant","DieHards"],"y":[32,51,60,54,41],"marker":{"color":"#5D6D7E","line":{"color":"rgba(255,127,14,1)"}},"text":[58,34,20,14,30],"textposition":["auto","auto","auto","auto","auto"],"name":"Not Sure","type":"bar","error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["First Out","Constrained","Optimists","Reluctant","DieHards"],"y":[8,14,18,32,29],"marker":{"color":"#5499C7","line":{"color":"rgba(44,160,44,1)"}},"text":[58,34,20,14,30],"textposition":["auto","auto","auto","auto","auto"],"name":"No","type":"bar","error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>You can find more ezamples of using <code>plotly</code> on their website: <a href="https://plotly.com/r/" class="uri">https://plotly.com/r/</a>.</p>
</div>
</div>
<div id="web-app-with-rshiny" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Web app with RShiny</h2>
<p><em>This Shiny tutorial was edited based on the official tutorial on the <a href="https://shiny.rstudio.com/tutorial/">website</a></em></p>
<p>With RShiny, it is possible to make the functions in your R script available to people who donât necessarily know R. For example, in this <a href="https://udwq.shinyapps.io/lakeprofiledashboard/">app</a>, you can create different types of graph by selecting a site and other parameters. Basically, itâs web development using the power of R libraries.</p>
<p>So, just like any web tools, an RshinyApp has components on the User and Server side.
<img src="images/appStructure.png" alt="Rshiny app structure" /></p>
<p>The visual appearance of the app can be modified in the user component. You can use it to change layout, font size, color, etc. Whereas on the server side, you can customize how your app responds to user inputs/interactions.</p>
<p>A basic <strong>ShinyApp starter template</strong> looks like this:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="visualization.html#cb107-1"></a><span class="kw">library</span>(shiny)</span>
<span id="cb107-2"><a href="visualization.html#cb107-2"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>()</span>
<span id="cb107-3"><a href="visualization.html#cb107-3"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){}</span>
<span id="cb107-4"><a href="visualization.html#cb107-4"></a><span class="kw">shinyApp</span>(<span class="dt">ui=</span>ui, <span class="dt">server=</span>server)</span></code></pre></div>
<p>If you run the script above, it will give you and empty page. Some content will show when you add some (text) elements with <code>fluidPage</code>.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="visualization.html#cb108-1"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(<span class="st">&#39;Hello world&#39;</span>)</span>
<span id="cb108-2"><a href="visualization.html#cb108-2"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){}</span>
<span id="cb108-3"><a href="visualization.html#cb108-3"></a><span class="kw">shinyApp</span>(<span class="dt">ui=</span>ui, <span class="dt">server=</span>server)</span></code></pre></div>
<div id="input-functions" class="section level3" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Input functions</h3>
<p>For richer content, the <code>shiny</code> package has built-in functions that will allow you create them. <code>sliderInput</code> for example adds a slider in your web app.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="visualization.html#cb109-1"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</span>
<span id="cb109-2"><a href="visualization.html#cb109-2"></a>  <span class="kw">sliderInput</span>(<span class="dt">inputId=</span><span class="st">&#39;num&#39;</span>,</span>
<span id="cb109-3"><a href="visualization.html#cb109-3"></a>              <span class="dt">label=</span><span class="st">&#39;Choose a number&#39;</span>,</span>
<span id="cb109-4"><a href="visualization.html#cb109-4"></a>              <span class="dt">value=</span><span class="dv">25</span>, <span class="dt">min=</span><span class="dv">1</span>, <span class="dt">max=</span><span class="dv">100</span>)</span>
<span id="cb109-5"><a href="visualization.html#cb109-5"></a>)</span>
<span id="cb109-6"><a href="visualization.html#cb109-6"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){}</span>
<span id="cb109-7"><a href="visualization.html#cb109-7"></a><span class="kw">shinyApp</span>(<span class="dt">ui=</span>ui, <span class="dt">server=</span>server)</span></code></pre></div>
<p><code>sliderInput</code> is part of a group of function called <strong>inputs</strong>. These functions allow an Rshiny developper like yourself to add html element that will serve as user input. Here are some input functions you can try:
<img src="images/inputFunctions.png" alt="Rshiny input functions" /></p>
<p>All input functions take as first 2 arguments: <code>inputId</code> and <code>label</code>. <code>inputId</code> is an ID that R will use create the input element in a webpage and to reference it later. <code>label</code> is just a text that the user will see, describing what the input element is for. The rest of the arguments are function-specific.</p>
</div>
<div id="output-functions" class="section level3" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Output functions</h3>
<p>Output functions, on the other hand, allow you to add outputs of R into your web page. As you know, these outputs can be image, plot, table, text, etc. And there are specific output functions for each type of output.</p>
<div class="figure">
<img src="images/outputFunctions.png" alt="" />
<p class="caption">Rshiny output functions</p>
</div>
<p>Output functions are called similarly to the input functions:
<img src="images/callOutputFunctions.png" alt="Rshiny output functions" /></p>
<p>Here is our app with an output function:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="visualization.html#cb110-1"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</span>
<span id="cb110-2"><a href="visualization.html#cb110-2"></a>  <span class="kw">sliderInput</span>(<span class="dt">inputId=</span><span class="st">&#39;num&#39;</span>,</span>
<span id="cb110-3"><a href="visualization.html#cb110-3"></a>              <span class="dt">label=</span><span class="st">&#39;Choose a number&#39;</span>,</span>
<span id="cb110-4"><a href="visualization.html#cb110-4"></a>              <span class="dt">value=</span><span class="dv">25</span>, <span class="dt">min=</span><span class="dv">1</span>, <span class="dt">max=</span><span class="dv">100</span>),</span>
<span id="cb110-5"><a href="visualization.html#cb110-5"></a>  <span class="kw">plotOutput</span>(<span class="st">&#39;hist&#39;</span>)</span>
<span id="cb110-6"><a href="visualization.html#cb110-6"></a>)</span>
<span id="cb110-7"><a href="visualization.html#cb110-7"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){}</span>
<span id="cb110-8"><a href="visualization.html#cb110-8"></a><span class="kw">shinyApp</span>(<span class="dt">ui=</span>ui, <span class="dt">server=</span>server)</span></code></pre></div>
<p>Running the previous script wonât show any plot though. It just reserve a space in the webpage for plot with id: âhistâ. To actually create the plot, you must use the server function.</p>
</div>
<div id="server-function" class="section level3" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> Server function</h3>
<p>Server function creates the interactivity in your web application, i.e.Â this is where you set up how an output (ex: graph) chnages with the user input (ex: some number). However, there are 3 rules that has to be followed and it is summarized in this script:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="visualization.html#cb111-1"></a><span class="cf">function</span>(input, output){</span>
<span id="cb111-2"><a href="visualization.html#cb111-2"></a>  <span class="co">#1 outputId is the outputId you defined with output function</span></span>
<span id="cb111-3"><a href="visualization.html#cb111-3"></a>  <span class="co">#2 to render on a webpage. To render a plot, use renderPlot()</span></span>
<span id="cb111-4"><a href="visualization.html#cb111-4"></a>  output<span class="op">$</span>outputId &lt;-<span class="st"> </span><span class="kw">renderSomething</span>({</span>
<span id="cb111-5"><a href="visualization.html#cb111-5"></a>    <span class="co">#3 inputId is the inputId you defined with input function</span></span>
<span id="cb111-6"><a href="visualization.html#cb111-6"></a>    <span class="kw">someFunction</span>(input<span class="op">$</span>inputId)</span>
<span id="cb111-7"><a href="visualization.html#cb111-7"></a>  })</span>
<span id="cb111-8"><a href="visualization.html#cb111-8"></a>}</span>
<span id="cb111-9"><a href="visualization.html#cb111-9"></a><span class="co"># Anything inside the curly braces is an R code. And it can be multiple lines of code.</span></span></code></pre></div>
<p>In summary, you must define output variable by the <code>outputId</code> and prefixing it with <code>output$</code>. You must call the R script that will produce the output with a <code>render*({})</code> function. And you must call the user input with its <code>inputId</code> and prefixing it with <code>input$</code>.</p>
<p>In our example script, we can render it as follow:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="visualization.html#cb112-1"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</span>
<span id="cb112-2"><a href="visualization.html#cb112-2"></a>  <span class="kw">sliderInput</span>(<span class="dt">inputId=</span><span class="st">&#39;num&#39;</span>,</span>
<span id="cb112-3"><a href="visualization.html#cb112-3"></a>              <span class="dt">label=</span><span class="st">&#39;Choose a number&#39;</span>,</span>
<span id="cb112-4"><a href="visualization.html#cb112-4"></a>              <span class="dt">value=</span><span class="dv">25</span>, <span class="dt">min=</span><span class="dv">1</span>, <span class="dt">max=</span><span class="dv">100</span>),</span>
<span id="cb112-5"><a href="visualization.html#cb112-5"></a>  <span class="kw">plotOutput</span>(<span class="st">&#39;hist&#39;</span>)</span>
<span id="cb112-6"><a href="visualization.html#cb112-6"></a>)</span>
<span id="cb112-7"><a href="visualization.html#cb112-7"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){</span>
<span id="cb112-8"><a href="visualization.html#cb112-8"></a>    output<span class="op">$</span>hist &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</span>
<span id="cb112-9"><a href="visualization.html#cb112-9"></a>      title &lt;-<span class="st"> </span><span class="kw">paste</span>(input<span class="op">$</span>num, <span class="st">&#39;random normal values&#39;</span>)</span>
<span id="cb112-10"><a href="visualization.html#cb112-10"></a>      <span class="kw">hist</span>(<span class="kw">rnorm</span>(input<span class="op">$</span>num), <span class="dt">main=</span>title, <span class="dt">xlab=</span><span class="st">&#39;values&#39;</span>)</span>
<span id="cb112-11"><a href="visualization.html#cb112-11"></a>  })</span>
<span id="cb112-12"><a href="visualization.html#cb112-12"></a>}</span>
<span id="cb112-13"><a href="visualization.html#cb112-13"></a><span class="kw">shinyApp</span>(<span class="dt">ui=</span>ui, <span class="dt">server=</span>server)</span></code></pre></div>
<p>To make much more advanced app, simply read the instructions on <a href="https://shiny.rstudio.com/articles/">Rshiny website</a>.</p>
</div>
<div id="sharing-your-app" class="section level3" number="5.3.4">
<h3><span class="header-section-number">5.3.4</span> Sharing your app</h3>
<p>Now you can create your own Shiny app. But for now you can only run it in your computer and no one else has access to it. To make available to the public:</p>
<ol style="list-style-type: decimal">
<li>Save the <code>ui</code> and <code>server</code> objects/scripts into a stand alone R script, name it <code>app.R</code>, and save it in a separate folder. You must name it <code>app.R</code> as thatâs the file that the server will look for when you deploy your app. For this example, Iâd save this as <code>app.R</code></li>
</ol>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="visualization.html#cb113-1"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</span>
<span id="cb113-2"><a href="visualization.html#cb113-2"></a>  <span class="kw">sliderInput</span>(<span class="dt">inputId=</span><span class="st">&#39;num&#39;</span>,</span>
<span id="cb113-3"><a href="visualization.html#cb113-3"></a>              <span class="dt">label=</span><span class="st">&#39;Choose a number&#39;</span>,</span>
<span id="cb113-4"><a href="visualization.html#cb113-4"></a>              <span class="dt">value=</span><span class="dv">25</span>, <span class="dt">min=</span><span class="dv">1</span>, <span class="dt">max=</span><span class="dv">100</span>),</span>
<span id="cb113-5"><a href="visualization.html#cb113-5"></a>  <span class="kw">plotOutput</span>(<span class="st">&#39;hist&#39;</span>)</span>
<span id="cb113-6"><a href="visualization.html#cb113-6"></a>)</span>
<span id="cb113-7"><a href="visualization.html#cb113-7"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){</span>
<span id="cb113-8"><a href="visualization.html#cb113-8"></a>    output<span class="op">$</span>hist &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</span>
<span id="cb113-9"><a href="visualization.html#cb113-9"></a>      title &lt;-<span class="st"> </span><span class="kw">paste</span>(input<span class="op">$</span>num, <span class="st">&#39;random normal values&#39;</span>)</span>
<span id="cb113-10"><a href="visualization.html#cb113-10"></a>      <span class="kw">hist</span>(<span class="kw">rnorm</span>(input<span class="op">$</span>num), <span class="dt">main=</span>title, <span class="dt">xlab=</span><span class="st">&#39;values&#39;</span>)</span>
<span id="cb113-11"><a href="visualization.html#cb113-11"></a>  })</span>
<span id="cb113-12"><a href="visualization.html#cb113-12"></a>}</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Go to <a href="https://www.shinyapps.io">shinyapps.io</a> and log in or sign for an account.</li>
<li>Now simply run the app on your computer</li>
<li>In the top right cover of R viewer window, there is a <code>Publish</code> button that you can use to publish your app.</li>
<li>Simply follow the instructions.</li>
</ol>
</div>
</div>
<div id="more-dataviz-resources" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> More dataviz resources</h2>
<p>More data visualization resources can be found in this <a href="https://docs.google.com/spreadsheets/d/156QjpOgLCiDlcmkhJ0RQTVjFYBld8qAhaZsgT7He7b4">spreadsheet</a>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="cleaning.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="spatial.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rajaoberison/edsy/edit/master/05-visualization.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["edsy.pdf", "edsy.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
