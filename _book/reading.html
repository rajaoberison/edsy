<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 2 Reading | EDS Vignettes</title>
  <meta name="description" content="Data science resources for FES Students" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 2 Reading | EDS Vignettes" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Data science resources for FES Students" />
  <meta name="github-repo" content="rajaoberison/edsy" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 2 Reading | EDS Vignettes" />
  
  <meta name="twitter:description" content="Data science resources for FES Students" />
  

<meta name="author" content="Andry Rajaoberison" />


<meta name="date" content="2020-06-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="orientation.html"/>
<link rel="next" href="extraction.html"/>
<script src="libs/header-attrs-2.2/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">FES EDS Tutorials</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="1" data-path="orientation.html"><a href="orientation.html"><i class="fa fa-check"></i><b>1</b> Orientation</a>
<ul>
<li class="chapter" data-level="1.1" data-path="orientation.html"><a href="orientation.html#downloading-r-studio"><i class="fa fa-check"></i><b>1.1</b> Downloading R-Studio</a></li>
<li class="chapter" data-level="1.2" data-path="orientation.html"><a href="orientation.html#your-work-space"><i class="fa fa-check"></i><b>1.2</b> Your Work Space</a></li>
<li class="chapter" data-level="1.3" data-path="orientation.html"><a href="orientation.html#helpful-tools-for-learning-more"><i class="fa fa-check"></i><b>1.3</b> Helpful Tools for Learning More</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="reading.html"><a href="reading.html"><i class="fa fa-check"></i><b>2</b> Reading</a>
<ul>
<li class="chapter" data-level="2.1" data-path="reading.html"><a href="reading.html#explaining-working-directories"><i class="fa fa-check"></i><b>2.1</b> Explaining Working Directories</a></li>
<li class="chapter" data-level="2.2" data-path="reading.html"><a href="reading.html#loading-from-package-library"><i class="fa fa-check"></i><b>2.2</b> Loading from Package Library</a></li>
<li class="chapter" data-level="2.3" data-path="reading.html"><a href="reading.html#csv"><i class="fa fa-check"></i><b>2.3</b> CSV</a></li>
<li class="chapter" data-level="2.4" data-path="reading.html"><a href="reading.html#excel"><i class="fa fa-check"></i><b>2.4</b> Excel</a></li>
<li class="chapter" data-level="2.5" data-path="reading.html"><a href="reading.html#google-spreadsheets"><i class="fa fa-check"></i><b>2.5</b> Google Spreadsheets</a></li>
<li class="chapter" data-level="2.6" data-path="reading.html"><a href="reading.html#spss"><i class="fa fa-check"></i><b>2.6</b> SPSS</a></li>
<li class="chapter" data-level="2.7" data-path="reading.html"><a href="reading.html#rda"><i class="fa fa-check"></i><b>2.7</b> RDA</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="extraction.html"><a href="extraction.html"><i class="fa fa-check"></i><b>3</b> Extraction</a>
<ul>
<li class="chapter" data-level="3.1" data-path="extraction.html"><a href="extraction.html#web-scraping"><i class="fa fa-check"></i><b>3.1</b> Web Scraping</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="structuring.html"><a href="structuring.html"><i class="fa fa-check"></i><b>4</b> Structuring</a>
<ul>
<li class="chapter" data-level="4.1" data-path="structuring.html"><a href="structuring.html#accessing-data-in-r"><i class="fa fa-check"></i><b>4.1</b> Accessing Data in R</a></li>
<li class="chapter" data-level="4.2" data-path="structuring.html"><a href="structuring.html#data-types"><i class="fa fa-check"></i><b>4.2</b> Data types</a></li>
<li class="chapter" data-level="4.3" data-path="structuring.html"><a href="structuring.html#inspecting-the-data"><i class="fa fa-check"></i><b>4.3</b> Inspecting the data</a></li>
<li class="chapter" data-level="4.4" data-path="structuring.html"><a href="structuring.html#subsetting-and-filtering"><i class="fa fa-check"></i><b>4.4</b> Subsetting and Filtering</a></li>
<li class="chapter" data-level="4.5" data-path="structuring.html"><a href="structuring.html#changing-cell-values"><i class="fa fa-check"></i><b>4.5</b> Changing cell values</a></li>
<li class="chapter" data-level="4.6" data-path="structuring.html"><a href="structuring.html#pivoting-the-dataset"><i class="fa fa-check"></i><b>4.6</b> Pivoting the dataset</a></li>
<li class="chapter" data-level="4.7" data-path="structuring.html"><a href="structuring.html#merging-two-dataframes"><i class="fa fa-check"></i><b>4.7</b> Merging Two Dataframes</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="cleaning.html"><a href="cleaning.html"><i class="fa fa-check"></i><b>5</b> Cleaning</a>
<ul>
<li class="chapter" data-level="5.1" data-path="cleaning.html"><a href="cleaning.html#fixing-skewed-distribution"><i class="fa fa-check"></i><b>5.1</b> Fixing skewed distribution</a></li>
<li class="chapter" data-level="5.2" data-path="cleaning.html"><a href="cleaning.html#treating-outliers"><i class="fa fa-check"></i><b>5.2</b> Treating outliers</a></li>
<li class="chapter" data-level="5.3" data-path="cleaning.html"><a href="cleaning.html#fixing-missing-values"><i class="fa fa-check"></i><b>5.3</b> Fixing missing values</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>6</b> Visualization</a>
<ul>
<li class="chapter" data-level="6.1" data-path="visualization.html"><a href="visualization.html#simple-graphs-with-ggplot2"><i class="fa fa-check"></i><b>6.1</b> Simple graphs with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="visualization.html"><a href="visualization.html#setting-ggplot2-theme"><i class="fa fa-check"></i><b>6.1.1</b> Setting <code>ggplot2</code> theme</a></li>
<li class="chapter" data-level="6.1.2" data-path="visualization.html"><a href="visualization.html#ggplot2-example-1-stacked-bar-plot"><i class="fa fa-check"></i><b>6.1.2</b> <code>ggplot2</code> Example 1: Stacked bar plot</a></li>
<li class="chapter" data-level="6.1.3" data-path="visualization.html"><a href="visualization.html#ggplot2-example-2-grouped-bar-plot"><i class="fa fa-check"></i><b>6.1.3</b> <code>ggplot2</code> Example 2: Grouped bar plot</a></li>
<li class="chapter" data-level="6.1.4" data-path="visualization.html"><a href="visualization.html#ggplot2-example-3-scatterplot"><i class="fa fa-check"></i><b>6.1.4</b> <code>ggplot2</code> Example 3: Scatterplot</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="visualization.html"><a href="visualization.html#animated-graph-with-gganimate"><i class="fa fa-check"></i><b>6.2</b> Animated graph with <code>gganimate</code></a></li>
<li class="chapter" data-level="6.3" data-path="visualization.html"><a href="visualization.html#interactive-graph-with-plotly"><i class="fa fa-check"></i><b>6.3</b> Interactive graph with <code>plotly</code></a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="visualization.html"><a href="visualization.html#plotly-example-1-interactive-version-of-the-stacked-bar"><i class="fa fa-check"></i><b>6.3.1</b> <code>plotly</code> Example 1: Interactive version of the stacked bar</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="visualization.html"><a href="visualization.html#web-app-with-rshiny"><i class="fa fa-check"></i><b>6.4</b> Web app with RShiny</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="visualization.html"><a href="visualization.html#input-functions"><i class="fa fa-check"></i><b>6.4.1</b> Input functions</a></li>
<li class="chapter" data-level="6.4.2" data-path="visualization.html"><a href="visualization.html#output-functions"><i class="fa fa-check"></i><b>6.4.2</b> Output functions</a></li>
<li class="chapter" data-level="6.4.3" data-path="visualization.html"><a href="visualization.html#server-function"><i class="fa fa-check"></i><b>6.4.3</b> Server function</a></li>
<li class="chapter" data-level="6.4.4" data-path="visualization.html"><a href="visualization.html#sharing-your-app"><i class="fa fa-check"></i><b>6.4.4</b> Sharing your app</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="visualization.html"><a href="visualization.html#more-data-visualization-resources"><i class="fa fa-check"></i><b>6.5</b> More data visualization resources</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="spatial.html"><a href="spatial.html"><i class="fa fa-check"></i><b>7</b> Spatial data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="spatial.html"><a href="spatial.html#importing-spatial-data"><i class="fa fa-check"></i><b>7.1</b> Importing spatial data</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="spatial.html"><a href="spatial.html#reading-shapefile"><i class="fa fa-check"></i><b>7.1.1</b> Reading shapefile</a></li>
<li class="chapter" data-level="7.1.2" data-path="spatial.html"><a href="spatial.html#reading-raster"><i class="fa fa-check"></i><b>7.1.2</b> Reading raster</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="spatial.html"><a href="spatial.html#processing"><i class="fa fa-check"></i><b>7.2</b> Processing</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="spatial.html"><a href="spatial.html#creating-point-data"><i class="fa fa-check"></i><b>7.2.1</b> Creating point data</a></li>
<li class="chapter" data-level="7.2.2" data-path="spatial.html"><a href="spatial.html#joining-with-another-dataframe"><i class="fa fa-check"></i><b>7.2.2</b> Joining with another dataframe</a></li>
<li class="chapter" data-level="7.2.3" data-path="spatial.html"><a href="spatial.html#spatial-joining"><i class="fa fa-check"></i><b>7.2.3</b> Spatial joining</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="spatial.html"><a href="spatial.html#some-visualization-examples"><i class="fa fa-check"></i><b>7.3</b> Some Visualization Examples</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="spatial.html"><a href="spatial.html#plotting-charcoal-data"><i class="fa fa-check"></i><b>7.3.1</b> Plotting charcoal data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="analysis.html"><a href="analysis.html"><i class="fa fa-check"></i><b>8</b> Analysis</a>
<ul>
<li class="chapter" data-level="8.1" data-path="analysis.html"><a href="analysis.html#working-with-survey-data"><i class="fa fa-check"></i><b>8.1</b> Working with survey data</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="analysis.html"><a href="analysis.html#variable-standardization"><i class="fa fa-check"></i><b>8.1.1</b> Variable Standardization</a></li>
<li class="chapter" data-level="8.1.2" data-path="analysis.html"><a href="analysis.html#sample-weighting"><i class="fa fa-check"></i><b>8.1.2</b> Sample weighting</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="analysis.html"><a href="analysis.html#working-with-covid-19-data"><i class="fa fa-check"></i><b>8.2</b> Working with COVID-19 data</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>9</b> Resources</a>
<ul>
<li class="chapter" data-level="9.1" data-path="resources.html"><a href="resources.html#data"><i class="fa fa-check"></i><b>9.1</b> Data</a></li>
<li class="chapter" data-level="9.2" data-path="resources.html"><a href="resources.html#eds-course-map"><i class="fa fa-check"></i><b>9.2</b> EDS Course Map</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">EDS Vignettes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="reading" class="section level1" number="2">
<h1><span class="header-section-number">Section 2</span> Reading</h1>
<p>In this section, we learn how to read data from different file types. Data can come in many formats, but under the hood most file types operate very similarly. Whether it be a csv (comma separated value), an Excel sheet, a Google sheet, or an SPSS file, all are primarily constructed by rows and columns of entries. Data in each cell is stored as a distinct type of data, such as integer, character, or factor. Reading these files in allows you to explore, manipulate, and eventually return them in a different form using R.</p>
<div id="explaining-working-directories" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Explaining Working Directories</h2>
<p>When you open a document from a folder, R automatically assumes that the folder is your ‘Working Directory’. Think of this like your home base from which you can navigate to any file on your computer. If you want to access a file from the same folder as where you stored your R script (which is the easiest case), all you have to do to make the commands below run successfully is enter the name of the file in quotation marks. Navigating to another folder takes more work. If you have a folder with the file you want to read in nested within the current Working Directory folder, simply type ’NameofFolder + / + NameofFile“. (e.g. ”SubFolder/Datafile.csv“). If you want to back out of your current folder one level, you need to type ‘.. + / + NameofFile’ to move back one layer (e.g. ”../Datafile.csv"). Moving in two layers or out two layers follows the same pattern, just iterated We highly recommend never manually resetting your working directory, which can be an untraceable and confusing command. We additionally recommend keeping all necessary files stored in intuitive and easy locations to access.</p>
</div>
<div id="loading-from-package-library" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Loading from Package Library</h2>
<p>Packages are sets of functions that can be written and published by anybody who uses R. They are typically built around usage themes and can be an incredible resource for specific projects. Because R is a community-based language that has been used in dozens of diverse fields, hundreds of packages exist that are specifically tailored to simplify processes. Before using a new package and reading it from your library, you must first install it onto your computer. All packages are free and typically well documented, so that you can learn quickly what exactly their functions accomplish. An example of installing and loading ‘tidyverse’ can be seen here. You only need to make the ‘install.packages’ call once on your computer. Make sure you are connected to the internet when you do it, since R accesses online resources whenever it installs a new package. After that, all you need to do in a new R document is make a library() call and reference the package you’ll be using.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="reading.html#cb11-1"></a><span class="kw">install.packages</span>(<span class="st">&#39;tidyverse&#39;</span>)</span>
<span id="cb11-2"><a href="reading.html#cb11-2"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
</div>
<div id="csv" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> CSV</h2>
<p>CSV files are composed of a row with column headers followed by data entries, where each cell is separated by <code>,</code> and each row starts on a new line. To extract data from a file like this, use the below call, replacing ‘/path/to/csv’ with the local path on your computer to access data using the syntax described above. These parameters written in the code below are also the default values for the <code>read.csv</code> function. The left side of the expression is what the new name of your data will be, and the arrow in the middle means we are assigning the results of the read call on the right to that name. All code lines within the parentheses are the arguments that we pass to the ‘read.csv’ call, which clarify specifically how we want the action to be carried out. Here are the default arguments we mentioned:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="reading.html#cb12-1"></a>data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">&#39;/path/to/csv&#39;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, <span class="dt">sep =</span> <span class="st">&#39;,&#39;</span>)</span></code></pre></div>
<p>Now we will show how to use this call to get data stored somewhere on your computer. Below is an example of reading in a file called ‘hurricane.csv’ from the folder ‘data’. Because all of the default arguments match with what we want, we do not need to write them out explicitly.</p>
<p>From now on, in code blocks, we will also be using comments to help the reader track what is happening. A comment is a line of code that we tell the computer not to process as logic but rather to just record. You can write a comment by putting a ‘#’ character at the beginning of the line. All of the text after that on the same line will be treated as a comment. Writing in comments is a good habit, so that you or anybody else using your code can quickly understand what is happening.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="reading.html#cb13-1"></a><span class="co"># Any line of code starting with &#39;#&#39; is a comment and will not be read</span></span>
<span id="cb13-2"><a href="reading.html#cb13-2"></a><span class="co"># Example</span></span>
<span id="cb13-3"><a href="reading.html#cb13-3"></a>data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">&#39;data/hurricane.csv&#39;</span>)</span></code></pre></div>
<p>Some exceptions: if your file has entries separated by something other than a comma, you can set the ‘sep’ argument to something more specific. Say, for instance, someone has stored data separated by “/”. All you need to do is write sep = ‘/’ as an argument and R will take care of the rest. If you want to control the conversion of character variables to factors, you can pass the argument ‘as.is = TRUE’ to prevent this encoding.</p>
</div>
<div id="excel" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Excel</h2>
<p>The main advantage of Excel files is that they can store multiple sheets, while a csv file represents only a single table of data. As such, you must clarify which sheet you are reading from when you make this call. For this example, we’re going to use the <code>readxl</code> package from the comprehensive <code>tidyverse</code> collection, a suite of tools in R. Please visit this <a href="https://www.tidyverse.org/">website</a> to learn more about <code>tidyverse</code>.</p>
<p>To read an excel file, you can use the <code>read_excel</code> function and specify the <code>path/to/the/file</code> and <code>sheet</code> you want to open. If you don’t specify the <code>sheet</code>, <code>read_excel</code> will by default open the first sheet in the spreadsheet.</p>
<p>In the ‘eds.excel.sample.xlsx’ file, there are 2 tables: heatwave and hurricane. Here’s how we load both tables into R. Note that this will only work if you make sure that you have downloaded the readxl package using the process we described above:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="reading.html#cb14-1"></a><span class="kw">library</span>(readxl)</span>
<span id="cb14-2"><a href="reading.html#cb14-2"></a><span class="co"># Reading Sheet 1 and Sheet 2</span></span>
<span id="cb14-3"><a href="reading.html#cb14-3"></a>heatwave &lt;-<span class="st">  </span><span class="kw">read_excel</span>(<span class="dt">path=</span><span class="st">&#39;data/excel-sample.xlsx&#39;</span>, <span class="dt">sheet =</span> <span class="st">&#39;heatwave&#39;</span>)</span>
<span id="cb14-4"><a href="reading.html#cb14-4"></a>hurricane &lt;-<span class="st">  </span><span class="kw">read_excel</span>(<span class="dt">path=</span><span class="st">&#39;data/excel-sample.xlsx&#39;</span>, <span class="dt">sheet =</span> <span class="st">&#39;hurricane&#39;</span>)</span></code></pre></div>
<p>Once the tables are stored in individual R variables, you can perform exploration and analysis on them.</p>
</div>
<div id="google-spreadsheets" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Google Spreadsheets</h2>
<p>If the data is stored in a Google spreadsheet, we can read it using the <code>googledrive</code> and <code>googlesheet4</code> packages. We use the <code>googledrive</code> package to log into our Google Drive account and <code>googlesheets4</code> to read the speadsheets in our drive.</p>
<p>In the example below, we used a spreadsheet named <code>eds.sample.googlesheets</code> which contains the same tables as in the previous Excel example (heatwave and hurricane). You can clone the spreadsheet via this <a href="https://drive.google.com/open?id=1uIsgrcsevbm9voZU-rzqhTg2LE5SgEPlGabSXKTcQtc">link</a> if you’d like to follow along and repeat the steps below using your own Google account.</p>
<p>Authenticate to your drive using <code>drive_auth()</code>. When prompted, log in, authorize GoogleDrive, and use the authorization code if provided. You only need to run <code>drive_auth()</code> once.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="reading.html#cb15-1"></a><span class="kw">library</span>(googledrive)</span>
<span id="cb15-2"><a href="reading.html#cb15-2"></a><span class="co"># To authenticate and authorize googledrive package</span></span>
<span id="cb15-3"><a href="reading.html#cb15-3"></a><span class="kw">drive_auth</span>()</span></code></pre></div>
<p>The following scripts show how to explore a Google Drive folder. This is not recommended, as you might encounter performance issues.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="reading.html#cb16-1"></a><span class="co"># NOT recommended</span></span>
<span id="cb16-2"><a href="reading.html#cb16-2"></a><span class="co"># To view the list of files in a folder</span></span>
<span id="cb16-3"><a href="reading.html#cb16-3"></a><span class="kw">drive_ls</span>(<span class="st">&quot;EDS&quot;</span>) <span class="co"># where &quot;EDS&quot; is the folder name</span></span>
<span id="cb16-4"><a href="reading.html#cb16-4"></a><span class="co"># To also get the files within the subfolders</span></span>
<span id="cb16-5"><a href="reading.html#cb16-5"></a><span class="kw">drive_ls</span>(<span class="st">&quot;EDS&quot;</span>, <span class="dt">recursive =</span> <span class="ot">TRUE</span>)</span>
<span id="cb16-6"><a href="reading.html#cb16-6"></a><span class="co"># To view the list of spreadsheets within a folder</span></span>
<span id="cb16-7"><a href="reading.html#cb16-7"></a><span class="kw">drive_ls</span>(<span class="st">&quot;EDS&quot;</span>, <span class="dt">type=</span><span class="st">&quot;spreadsheet&quot;</span>)</span></code></pre></div>
<p>Also, because of Google’s authentification system, you may run into an error like we do below when running the previous code (using <code>drive_ls()</code>). Glitches like this are why it is not recommended.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="reading.html#cb17-1"></a><span class="co">#&gt; Error in add_id_path(nodes, root_id = root_id, leaf = leaf) : !anyDuplicated(nodes$id) is not TRUE</span></span></code></pre></div>
<p>To avoid this, you can use the folder url instead of the folder name. The folder url can be obtained by right-clicking on the folder and selecting <code>Get shareable link</code>. Then run the following code:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="reading.html#cb18-1"></a><span class="co"># If using the folder name doesn&#39;t work</span></span>
<span id="cb18-2"><a href="reading.html#cb18-2"></a>folder_url =<span class="st"> &#39;https://drive.google.com/open?id=1e0uJ9dwFcL34JA61F0tGSoaiMZ_xio_4&#39;</span></span>
<span id="cb18-3"><a href="reading.html#cb18-3"></a><span class="kw">drive_ls</span>(folder_url, <span class="dt">type=</span><span class="st">&quot;spreadsheet&quot;</span>)</span></code></pre></div>
<p>Then you can load the spreadsheet by using its <code>id</code></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="reading.html#cb19-1"></a>eds.sample.spreadsheet &lt;-<span class="st"> </span><span class="kw">drive_get</span>(<span class="dt">id =</span> <span class="st">&#39;1uIsgrcsevbm9voZU-rzqhTg2LE5SgEPlGabSXKTcQtc&#39;</span>)</span></code></pre></div>
<p>It is also possible to read the spreadsheet right away by using its link/path (without using <code>drive_ls()</code>). We recommend using this to read any Google Drive files.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="reading.html#cb20-1"></a>eds.sample.spreadsheet &lt;-<span class="st"> </span><span class="kw">drive_get</span>(<span class="dt">path =</span> <span class="st">&#39;https://drive.google.com/open?id=1uIsgrcsevbm9voZU-rzqhTg2LE5SgEPlGabSXKTcQtc&#39;</span>)</span></code></pre></div>
<p>Once the spreadsheet is loaded, we run a similar code used for the Excel files to read tables within the spreadsheet. But for Google Sheets, this function is called <code>read_sheet</code>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="reading.html#cb21-1"></a><span class="kw">library</span>(googlesheets4)</span>
<span id="cb21-2"><a href="reading.html#cb21-2"></a><span class="co"># Authorizing the googlesheets4 package</span></span>
<span id="cb21-3"><a href="reading.html#cb21-3"></a><span class="kw">sheets_auth</span>(<span class="dt">token=</span><span class="kw">drive_token</span>())</span>
<span id="cb21-4"><a href="reading.html#cb21-4"></a><span class="co"># Reading the tables</span></span>
<span id="cb21-5"><a href="reading.html#cb21-5"></a>heatwave &lt;-<span class="st"> </span><span class="kw">read_sheet</span>(eds.sample.spreadsheet, <span class="dt">sheet =</span> <span class="st">&#39;heatwave&#39;</span>)</span>
<span id="cb21-6"><a href="reading.html#cb21-6"></a>hurricane &lt;-<span class="st"> </span><span class="kw">read_sheet</span>(eds.sample.spreadsheet, <span class="dt">sheet =</span> <span class="st">&#39;hurricane&#39;</span>)</span></code></pre></div>
<p>If this presents too much of a headache and you’d rather download the Google Spreadsheet as either a csv or Excel file, you can save it locally to your computer, put it in the same folder as your R scripts, and use one of the two methods described above to read the file into your R environment.</p>
</div>
<div id="spss" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> SPSS</h2>
<p>SPSS is a statistical software package that stores data in its own format. You will occasionally encounter these types of files if working on a project with somebody who prefers SPSS. This requires its own package called ‘haven’.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="reading.html#cb22-1"></a><span class="kw">library</span>(haven)</span>
<span id="cb22-2"><a href="reading.html#cb22-2"></a>data &lt;-<span class="st"> </span><span class="kw">read_sav</span>(<span class="st">&quot;data/spss-sample.sav&quot;</span>)</span></code></pre></div>
<p>By default, the <code>read_sav()</code> will read the factor levels of non-numeric and non-character variables. If instead we want the labels, we can run the following code:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="reading.html#cb23-1"></a><span class="kw">library</span>(magrittr)</span>
<span id="cb23-2"><a href="reading.html#cb23-2"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb23-3"><a href="reading.html#cb23-3"></a><span class="co"># Applying haven::as_factor() to labelled columns Here, we already know that</span></span>
<span id="cb23-4"><a href="reading.html#cb23-4"></a><span class="co"># variables Zone, Q4 and Q50 are not factor variables.</span></span>
<span id="cb23-5"><a href="reading.html#cb23-5"></a>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(<span class="op">-</span>Zone, <span class="op">-</span>Q4, <span class="op">-</span>Q50), as_factor)</span></code></pre></div>
<pre><code>## # A tibble: 1,130 x 9
##    Zone     Q4 Q5            Q6    Q7             Q10     Q50 Q51   Q59         
##    &lt;chr&gt; &lt;dbl&gt; &lt;fct&gt;         &lt;fct&gt; &lt;fct&gt;          &lt;fct&gt; &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;       
##  1 A         2 3             0     Moderately Pr… No     1928 Male  $70,000-$99…
##  2 A         1 4             0     Moderately Pr… No     1962 Male  &lt;NA&gt;        
##  3 A         3 4             0     Moderately Pr… No     1931 Fema… Over $200,0…
##  4 A         3 6             1     Fully Prepared No     1950 Male  $100,000-$1…
##  5 A         2 Not Worried … 0     Very Prepared  No     1948 Male  $100,000-$1…
##  6 A         5 4             0     Very Prepared  No     1938 Fema… &lt;NA&gt;        
##  7 A         3 6             1     Moderately Pr… No     1977 Fema… &lt;NA&gt;        
##  8 A         5 4             0     Moderately Pr… No     1964 Fema… &lt;NA&gt;        
##  9 A         1 3             0     Moderately Pr… No     1976 Male  $40,000-$69…
## 10 A         2 6             0     Very Prepared  No     1964 Fema… Over $200,0…
## # … with 1,120 more rows</code></pre>
<p>Because variables can be labelled in SPSS, we can use them as well to find what each column represents.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="reading.html#cb25-1"></a><span class="co"># To get the labels of the variables / columns</span></span>
<span id="cb25-2"><a href="reading.html#cb25-2"></a><span class="kw">as.vector</span>(<span class="kw">unlist</span>(<span class="kw">lapply</span>(data, <span class="cf">function</span>(x) <span class="kw">attributes</span>(x)<span class="op">$</span>label)))</span></code></pre></div>
<pre><code>## [1] &quot;Q4. Since the beginning of 2009, how many hurricanes and tropical storms, if any, hit your city or town on or near the Connecticut coast while you were at home; that is, not out of town?&quot;                                         
## [2] &quot;Q5. Generally speaking, when a hurricane or tropical storm is approaching your city or town, how worried do you feel? Please answer using the following scale ranging from 1 (not at all worried) to 7 (extremely worried).&quot;        
## [3] &quot;Q6. Since the beginning of 2009, how many times, if ever, did you leave your home for someplace safer to avoid a hurricane or tropical storm; that is, how many times did you evacuate? Please enter the number in the boxes below.&quot;
## [4] &quot;Q7. Generally speaking, how prepared were you for the storm(s) you experienced?&quot;                                                                                                                                                    
## [5] &quot;Q10. Before Superstorm Sandy hit your area, did you leave your home to go someplace safer; that is, did you evacuate?&quot;                                                                                                              
## [6] &quot;Q50. In what year were you born?&quot;                                                                                                                                                                                                   
## [7] &quot;Q51. Are you...?&quot;                                                                                                                                                                                                                   
## [8] &quot;Q59. Last year (in 2013), what was your total HOUSEHOLD income from all sources?&quot;</code></pre>
<p>To learn more about the <code>haven</code> package and how the variables are stored, please visit: <a href="https://haven.tidyverse.org/" class="uri">https://haven.tidyverse.org/</a></p>
</div>
<div id="rda" class="section level2" number="2.7">
<h2><span class="header-section-number">2.7</span> RDA</h2>
<p>Other times you will encounter a native RDA file, which is a way of saving R data structures such as vectors, matrices, and data frames in an automatically compressed form. The benefit to an RDA file is that it loads or saves slightly quicker in R software than other file types, which can matter when you are dealing with massive files. Reading these files in is incredibly simple, using the following command:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="reading.html#cb27-1"></a><span class="kw">load</span>(<span class="dt">file =</span> <span class="st">&quot;mydata.rda&quot;</span>)</span>
<span id="cb27-2"><a href="reading.html#cb27-2"></a></span>
<span id="cb27-3"><a href="reading.html#cb27-3"></a><span class="co"># If you want to save your current work as an rda</span></span>
<span id="cb27-4"><a href="reading.html#cb27-4"></a><span class="kw">save</span>(x, <span class="dt">file =</span> <span class="st">&quot;myRDA.rda&quot;</span>)</span></code></pre></div>
<p>Just as you did for the last several procedures, replace ‘mydata.rda’ with the path to the file you are trying to read in. Because this is a native file type, no package is required.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="orientation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="extraction.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rajaoberison/edsy/edit/master/02-reading.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["edsy.pdf", "edsy.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
